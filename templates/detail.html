{% extends 'base.html' %}
{% load staticfiles %}


{% block title %}<title>{{ article.title }}  -以谁为师的博客</title> {% endblock %}


{% block content %}

    <div class="container">



        <div class="row">
            <!-- 将原有内容嵌套进新的div中 -->
            <div class="col-lg-9" >

                <h1 class="mt-4 mb-4">{{ article.title }}</h1>
                <p> 发表于: {{ article.publish }} 浏览量{{ article.view }}</p>

                {{ article.body |safe }}
            </div>

            <!-- 新增的目录 -->
            <div class="col-lg-3">
                <h4><strong>目录</strong></h4>
                <hr>
                <div>
                    <ul>
                        {{ toc|safe }}
                    </ul>
                </div>
            </div>



            <div class="div-left alert-info" >
                <img src={% static 'img/pay.jpg' %} alt="微信打赏" />
                <p>作者： 以谁为师</p>
                <p>最后更新： {{ article.mod_date }} </p>
                <p> 原始链接： http://attacker.club{% url "blog:detail" pk=article.id %} </p>
                <p> 转载本文请注明出处</p>
            </div>


        </div>

        <hr/>
        <br/>

        <div class="row">
            <div class="col-lg-8" >
                <form action="{% url 'comments:article_comment' article.pk %}" method="post" class="comment-form">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-md-4">
                            <label for="{{ form.name.id_for_label }}">用户：</label>
                            {{ form.name }}
                            {{ form.name.errors }}
                        </div>
                        <div class="col-md-4">
                            <label for="{{ form.email.id_for_label }}">邮箱：</label>
                            {{ form.email }}
                            {{ form.email.errors }}
                        </div>

                        <div class="col-md-4">
                            <label for="{{ form.url.id_for_label }}">网站：</label>
                            {{ form.url }}
                            {{ form.url.errors }}
                        </div>
                        <hr/>
                        <div class="col-md-12">
                            <label for="{{ form.text.id_for_label }}">评论：</label>
                            {{ form.text }}
                            {{ form.text.errors }}
                            <button type="submit" class="comment-btn">发表</button>
                        </div>
                    </div>    <!-- row -->
                </form>

                <ul class="comment-list list-unstyled">
                    {% for comment in comment_list %}
                        <li class="comment-item">
                            <span class="nickname">{{ comment.name }}</span>
                            <time class="submit-date">{{ comment.created_time }}</time>
                            <div class="text">
                                {{ comment.text }}
                        </li>
                    {% empty %}
                        暂无评论
                    {% endfor %}
                </ul>
            </div>
        </div>



    </div>


{% endblock %}
